@{
    var model = (CloudSalesEntity.StorageDoc)ViewBag.Model;
    ViewBag.Title = "采购单详情";
}

@section scripts{
    <script type="text/javascript">
        seajs.use(["scripts/purchase/purchases"], function (obj) {
            obj.initDetail('@(model.DocID)','@Html.ToJSONString(model)');
        });
    </script>
}
<div class="header-box">
    <span class="header-title left">采购单号：@(model.DocCode)</span>
    @if (model.Status < 2 && model.SourceType == 1)
    {
        <div class="btn right @(ExpandClass.IsLimits(HttpContext.Current, "103029002"))" id="btnOver">完成采购单</div>
    }
    @if (model.Status == 0 && model.SourceType == 1)
    {
        @*<div class="btnccc right @(ExpandClass.IsLimits(HttpContext.Current, "103029003"))" id="invalid">作废</div>*@
        <div class="btn999 right mRight10 @(ExpandClass.IsLimits(HttpContext.Current,"103029004"))" id="delete">删除</div>
    }
    
</div>
<div class="content-body mTop10">
    <ul class="content-info">
        <li><span class="column-title">订单总额：</span>@(model.TotalMoney.ToString("f2"))</li>
        <li><span class="column-title">已采购金额：</span>@(model.RealMoney.ToString("f2"))</li>
        <li><span class="column-title">采购员：</span>@(model.CreateUser.Name)</li>
        <li><span class="column-title">状态：</span>@(model.StatusStr)</li>
        <li><span class="column-title">创建日期：</span>@(model.CreateTime.ToString("yyyy-MM-dd HH:mm:ss"))</li>
        <li><span class="column-title">仓库：</span>@(model.WareHouse != null ? model.WareHouse.Name : "")</li>
        <li style="width:100%;"><span class="column-title">备注：</span>@(model.Remark)</li>
    </ul>
</div>
<div class="tab-nav">
    <ul class="tab-nav-ul left">
        <li class="hover " data-id="navProduct">采购单明细</li>
        @if (model.Status == 1 || model.Status == 2)
        {
            <li data-id="navStorageIn">入库明细</li>
        }
    </ul>
    @if (model.Status < 2 && model.SourceType == 1)
    {
        <div class="btn right @(ExpandClass.IsLimits(HttpContext.Current, "103029002"))" id="btnconfirm">入库登记</div>
    }
</div>
<div class="content-body">
    <table class="table-list nav-partdiv" id="navProduct">
        <tr class="tr-header">
            <td class="tLeft width300">产品名称</td>
            <td class="tLeft width300">规格</td>
            <td class="center width50">单位</td>
            <td class="tRight width100">采购价</td>
            <td class="center width80">数量</td>
            <td class="tRight width150">采购合计</td>
            <td class="center width80">入库数量</td>
            <td class="tRight width150">入库合计</td>
            
        </tr>
        @foreach (var item in model.Details)
        { 
            <tr class="box-item">
                <td class="tLeft">
                    <a class="btn-open-window" data-url="/Products/ChooseDetail?pid=@(item.ProductID)&did=@(item.ProductDetailID)" href="javascript:void(0);" data-name="产品详情页-@(item.ProductName)" data-id="@(item.ProductID)">@(item.ProductName)</a>
                </td>
                <td class="tLeft">
                    @(item.Remark)
                </td>
                <td class="center">
                    @(item.UnitName)
                </td>
                <td class="tRight">
                    @(item.Price.ToString("f2"))
                </td>
                <td class="center">
                    @(item.Quantity)
                </td>
                 <td class="tRight">
                    @(item.TotalMoney.ToString("f2"))
                </td>
                <td class="center">
                    @(item.Complete)
                </td>
               <td class="tRight">
                    @((item.Complete*item.Price).ToString("f2"))
                </td>
            </tr>
        }
    </table>
    <table id="navStorageIn" class="nav-partdiv table-items-detail hide">
        
    </table>
</div>
