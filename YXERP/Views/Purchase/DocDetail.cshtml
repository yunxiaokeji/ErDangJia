@{
    var model = (CloudSalesEntity.StorageDoc)ViewBag.Model;
    ViewBag.Title = "采购单详情";
}

@section scripts{
    <script type="text/javascript">
        seajs.use(["scripts/purchase/purchases"], function (obj) {
            obj.initDetail('@(model.DocID)','@Html.ToJSONString(model)');
        });
    </script>
}
<div class="header-box">
    <span class="header-title left">采购单号：@(model.DocCode)</span>
    @if (model.Status == 0)
    {
        <div class="btnccc right @(ExpandClass.IsLimits(HttpContext.Current, "103029003"))" id="invalid">作废</div>
        <div class="btn999 right mRight10 @(ExpandClass.IsLimits(HttpContext.Current,"103029004"))" id="delete">删除</div>
    }
    
</div>
<div class="content-body mTop10">
    <ul class="content-info">
        <li><span class="column-title">订单总额：</span>@(model.TotalMoney.ToString("f2"))</li>
        <li><span class="column-title">已入库金额：</span>@(model.RealMoney.ToString("f2"))</li>
        <li><span class="column-title">创建人：</span>@(model.CreateUser.Name)</li>
        <li><span class="column-title">状态：</span>@(model.StatusStr)</li>
        <li><span class="column-title">创建日期：</span>@(model.CreateTime.ToString("yyyy-MM-dd HH:mm:ss"))</li>
        <li><span class="column-title">仓库：</span>@(model.WareHouse != null ? model.WareHouse.Name : "")</li>
        <li style="width:100%;"><span class="column-title">备注：</span>@(model.Remark)</li>
    </ul>
</div>
<div class="tab-nav">
    <ul class="tab-nav-ul left">
        <li class="hover " data-id="navProduct">产品明细</li>
    </ul>
    @if (model.Status < 2)
    {
        <div class="btn right @(ExpandClass.IsLimits(HttpContext.Current, "103029002"))" id="btnconfirm">审核入库</div>
    }
</div>
<div class="content-body">
    <div class="table-box-list">
        <ul class="box-header">
            <li class="tLeft width300">产品名称</li>
            <li class="tLeft width300">规格</li>
            <li class="center width50">单位</li>
            <li class="tRight width100">采购价</li>
            <li class="center width80">数量</li>
            <li class="center width80">入库数量</li>
            <li class="tRight width150">小计</li>
        </ul>
        @foreach (var item in model.Details)
        { 
            <ul class="box-item">
                <li class="tLeft width300">
                    <a class="btn-open-window" data-url="/Products/ChooseDetail?pid=@(item.ProductID)&did=@(item.ProductDetailID)" href="javascript:void(0);" data-name="产品详情页-@(item.ProductName)" data-id="@(item.ProductID)">@(item.ProductName)</a>
                </li>
                <li class="tLeft width300">
                    @(item.Remark)
                </li>
                <li class="center width50">
                    @(item.UnitName)
                </li>
                <li class="tRight width100">
                    @(item.Price.ToString("f2"))
                </li>
                <li class="center width80">
                    @(item.Quantity)
                </li>
                <li class="center width80">
                    @(item.Complete)
                </li>
                <li class="tRight width150">
                    @(item.TotalMoney.ToString("f2"))
                </li>
            </ul>
        }
    </div>
</div>
